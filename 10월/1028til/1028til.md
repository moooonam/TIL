# Git advanced

<hr>
<br>

![git](https://miro.medium.com/max/686/1*diRLm1S5hkVoh5qeArND0Q.png)

![git2](https://i.stack.imgur.com/MgaV9.png)
## Git undoing

- Git에서 되돌리기는 작업 상태에 따라 크게 세 가지로 분류

<br>

- Working Directory 작업단계
  - Working Directory에서 수정한 파일 내용을 이전 커밋 상태로 되돌리기
  - git restore
    - Working Directory에서 수정한 파일 내용을 이전 커밋 상태(제일 직전 버전)로 되돌리기
    - 이미 버전 관리가 되고 있는 파일만 되돌리기 가능
    - **git restore를 통해 되돌리면, 해당 내용을 복원할 수 없으니 주의할 것!**
    - git restore {파일이름}

<br>

- Staging Area 작업단계 
  - Staging Area에 반영된 파일을 Working Directory로 되돌리기 
  - root-commit 여부에 따라 두 가지 명령어로 나뉨
    - root-commit이 없는경우 : git rm --cached {파일이름}
    - root-commit이 있는경우(Git 저장소에 한 개 이상의 커밋이 있는 경우) : git restore --staged {파일이름}

<br>

- Repository 작업단계
  - git commit --amend
  - 상황별로 두 가지 기능으로 나뉨
    - Staging Area에 새로 올라온 내용이 없다면, 직전 커밋의 메시지만 수정
    - Staging Area에 새로 올라온 내용이 있다면, 직전 커밋을 덮어쓰기
  - **이전 커밋을 완전히 고쳐서 새 커밋으로 변경하므로, 이전 커밋은 일어나지 않은 일이 되며 히스토리에도 남지 않음을 주의할 것!**

<br>

#### Git reset

- 시계를 마치 과거로 돌리는 듯한 행위로, 프로젝트를 특정 커밋(버전) 상태로 되돌림
- 특정 커밋으로 되돌아 갔을 때, **해당 커밋 이후로 쌓았던 커밋들은 전부 사라짐**
- git reset [옵션]{커밋ID}
  - 옵션은 soft,mixed,hard 중 하나를 작성
  - 커밋 ID는 되돌아가고 싶은 시점의 커밋 ID를 작성
  - --soft
    - 되돌아간 커밋 이후의 파일들은 Staging area로 돌려놓음
  - --mixed
    - 되돌아간 커밋 이후의 파일들은 Working Directory로 돌려놓음
    - reset의 기본값
  - --hard
    - 되돌아간 커밋 이후의 파일들은 모두 Working Directory에서 삭제



